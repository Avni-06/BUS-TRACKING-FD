<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bus Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>

  <!-- âœ… Font Awesome CDN -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    
    referrerpolicy="no-referrer"
  />
</head>
<body>
  <!-- Language Selector -->
  <div class="language-selector">
    <select id="languageSelect">
      <option value="en">English</option>
      <option value="hi">à¤¹à¤¿à¤‚à¤¦à¥€</option>
      <option value="pa">à¨ªà©°à¨œà¨¾à¨¬à©€</option>
    </select>
  </div>

  <!-- Animated Bus Background -->
  <div class="bus-animation">
    <div class="bus">ðŸšŒ</div> <!-- âœ… Keep main bus emoji -->
  </div>

  <!-- Navbar -->
  <header class="navbar">
    <div class="logo">BusTrack</div>
    <nav>
      <a href="login.html" data-translate="login">Login</a>
      <a href="signin.html" data-translate="signup">Signup</a>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <h1 data-translate="hero_title">Track your bus in real-time<br><span data-translate="hero_subtitle">anywhere, anytime</span></h1>
    <button id="trackBtn" data-translate="track_bus">Track Bus</button>
  </section>

  <!-- Features Section -->
  <!-- Features Section -->
 <section class="features">
  <div class="slider">
    <h4>Features</h4>
    <div class="slider-track">
      <div class="card">
        <div class="icon"><i class="fa-solid fa-bus"></i></div>
        <p>Live Bus tracking</p>
      </div>
      <div class="card">
        <div class="icon"><i class="fa-solid fa-users"></i></div>
        <p>Passengers count / CROWD</p>
      </div>
      <div class="card">
        <div class="icon"><i class="fa-solid fa-phone-volume"></i></div>
        <p>Offline Call Helpline Integration</p>
      </div>
      <div class="card">
        <div class="icon"><i class="fa-solid fa-box-open"></i></div>
        <p>Lost & Found</p>
      </div>

      <!-- Repeat cards for seamless loop -->
      <div class="card">
        <div class="icon"><i class="fa-solid fa-bus"></i></div>
        <p>Live Bus tracking</p>
      </div>
      <div class="card">
        <div class="icon"><i class="fa-solid fa-users"></i></div>
        <p>Passengers count / CROWD</p>
      </div>
      <div class="card">
        <div class="icon"><i class="fa-solid fa-phone-volume"></i></div>
        <p>Offline Call Helpline Integration</p>
      </div>
      <div class="card">
        <div class="icon"><i class="fa-solid fa-box-open"></i></div>
        <p>Lost & Found</p>
      </div>
    </div>
  </div>
</section>

  <!-- Footer -->
  <footer>
    <a href="about.html" data-translate="about">About</a>
    <a href="contact.html" data-translate="contact">Contact</a>
    <a href="faq.html" data-translate="faq">FAQ</a>
  </footer>

  <!-- Voice Assistant Button -->
  <button id="voice-btn" class="voice-button" onclick="toggleVoiceAssistant()">
    <i class="fa-solid fa-microphone"></i>
  </button>

  <!-- Voice Assistant Modal -->
  <div id="voiceModal" class="voice-modal">
    <div class="voice-modal-content">
      <div class="voice-modal-header">
        <h3 data-translate="voice_assistant">Voice Assistant</h3>
        <span class="close" onclick="closeVoiceModal()">&times;</span>
      </div>
      <div class="voice-modal-body">
        <div id="voiceStatus" class="voice-status">
          <i class="fa-solid fa-microphone"></i>
          <p data-translate="click_speak">Click and speak...</p>
        </div>
        <div id="voiceResponse" class="voice-response"></div>
      </div>
    </div>
  </div>

  <!-- Authentication Check Modal -->
  <div id="authModal" class="auth-modal">
    <div class="auth-modal-content">
      <div class="auth-modal-header">
        <h3 data-t,ranslate="login_required">Login Required</h3>
        <span class="close" onclick="closeAuthModal()">&times;</span>
      </div>
      <div class="auth-modal-body">
        <p data-translate="login_message">Please login to access this feature.</p>
        <div class="auth-modal-buttons">
          <a href="login.html" class="btn btn-primary" data-translate="login">Login</a>
          <a href="signin.html" class="btn btn-secondary" data-translate="signup">Sign Up</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Language translations
    const translations = {
      en: {
        hero_title: "Track your bus in real-time",
        hero_subtitle: "anywhere, anytime",
        track_bus: "Track Bus",
        live_tracking: "Live tracking",
        alerts: "Alerts",
        lost_found: "Lost & Found",
        emergency: "Emergency support",
        about: "About",
        contact: "Contact",
        faq: "FAQ",
        login: "Login",
        signup: "Signup",
        voice_assistant: "Voice Assistant",
        click_speak: "Click and speak...",
        login_required: "Login Required",
        login_message: "Please login to access this feature."
      },
      hi: {
        hero_title: "à¤…à¤ªà¤¨à¥€ à¤¬à¤¸ à¤•à¥‹ à¤°à¤¿à¤¯à¤²-à¤Ÿà¤¾à¤‡à¤® à¤®à¥‡à¤‚ à¤Ÿà¥à¤°à¥ˆà¤• à¤•à¤°à¥‡à¤‚",
        hero_subtitle: "à¤•à¤¹à¥€à¤‚ à¤­à¥€, à¤•à¤­à¥€ à¤­à¥€",
        track_bus: "à¤¬à¤¸ à¤Ÿà¥à¤°à¥ˆà¤• à¤•à¤°à¥‡à¤‚",
        live_tracking: "à¤²à¤¾à¤‡à¤µ à¤Ÿà¥à¤°à¥ˆà¤•à¤¿à¤‚à¤—",
        alerts: "à¤…à¤²à¤°à¥à¤Ÿ",
        lost_found: "à¤–à¥‹à¤¯à¤¾ à¤”à¤° à¤®à¤¿à¤²à¤¾",
        emergency: "à¤†à¤ªà¤¾à¤¤à¤•à¤¾à¤²à¥€à¤¨ à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾",
        about: "à¤•à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚",
        contact: "à¤¸à¤‚à¤ªà¤°à¥à¤•",
        faq: "à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤ªà¥à¤°à¤¶à¥à¤¨",
        login: "à¤²à¥‰à¤—à¤¿à¤¨",
        signup: "à¤¸à¤¾à¤‡à¤¨ à¤…à¤ª",
        voice_assistant: "à¤µà¥‰à¤¯à¤¸ à¤…à¤¸à¤¿à¤¸à¥à¤Ÿà¥‡à¤‚à¤Ÿ",
        click_speak: "à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤¬à¥‹à¤²à¥‡à¤‚...",
        login_required: "à¤²à¥‰à¤—à¤¿à¤¨ à¤†à¤µà¤¶à¥à¤¯à¤•",
        login_message: "à¤‡à¤¸ à¤«à¥€à¤šà¤° à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤²à¥‰à¤—à¤¿à¤¨ à¤•à¤°à¥‡à¤‚à¥¤"
      },
      pa: {
        hero_title: "à¨†à¨ªà¨£à©€ à¨¬à©±à¨¸ à¨¨à©‚à©° à¨°à©€à¨…à¨²-à¨Ÿà¨¾à¨ˆà¨® à¨µà¨¿à©±à¨š à¨Ÿà¨°à©ˆà¨• à¨•à¨°à©‹",
        hero_subtitle: "à¨•à¨¿à¨¤à©‡ à¨µà©€, à¨•à¨¦à©‡ à¨µà©€",
        track_bus: "à¨¬à©±à¨¸ à¨Ÿà¨°à©ˆà¨• à¨•à¨°à©‹",
        live_tracking: "à¨²à¨¾à¨ˆà¨µ à¨Ÿà¨°à©ˆà¨•à¨¿à©°à¨—",
        alerts: "à¨šà©‡à¨¤à¨¾à¨µà¨¨à©€à¨†à¨‚",
        lost_found: "à¨—à©à¨†à¨šà¨¿à¨† à¨…à¨¤à©‡ à¨®à¨¿à¨²à¨¿à¨†",
        emergency: "à¨à¨®à¨°à¨œà©ˆà¨‚à¨¸à©€ à¨¸à¨¹à¨¾à¨‡à¨¤à¨¾",
        about: "à¨¬à¨¾à¨°à©‡",
        contact: "à¨¸à©°à¨ªà¨°à¨•",
        faq: "à¨†à¨® à¨¸à¨µà¨¾à¨²",
        login: "à¨²à©Œà¨—à¨‡à¨¨",
        signup: "à¨¸à¨¾à¨ˆà¨¨ à¨…à©±à¨ª",
        voice_assistant: "à¨µà©Œà¨‡à¨¸ à¨¸à¨¹à¨¾à¨‡à¨•",
        click_speak: "à¨•à¨²à¨¿à©±à¨• à¨•à¨°à©‹ à¨…à¨¤à©‡ à¨¬à©‹à¨²à©‹...",
        login_required: "à¨²à©Œà¨—à¨‡à¨¨ à¨²à©‹à©œà©€à¨‚à¨¦à¨¾ à¨¹à©ˆ",
        login_message: "à¨‡à¨¸ à¨«à©€à¨šà¨° à¨¦à©€ à¨µà¨°à¨¤à©‹à¨‚ à¨•à¨°à¨¨ à¨²à¨ˆ à¨•à¨¿à¨°à¨ªà¨¾ à¨•à¨°à¨•à©‡ à¨²à©Œà¨—à¨‡à¨¨ à¨•à¨°à©‹à¥¤"
      }
    };

    // Language functionality
    function changeLanguage(lang) {
      const elements = document.querySelectorAll('[data-translate]');
      elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang] && translations[lang][key]) {
          element.textContent = translations[lang][key];
        }
      });
      localStorage.setItem('selectedLanguage', lang);
    }

    // Initialize language
    document.addEventListener('DOMContentLoaded', function() {
      const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
      document.getElementById('languageSelect').value = savedLanguage;
      changeLanguage(savedLanguage);

      document.getElementById('languageSelect').addEventListener('change', function() {
        changeLanguage(this.value);
      });

      // Track Bus button functionality
      document.getElementById('trackBtn').addEventListener('click', function() {
        checkLoginAndRedirect('tracking');
      });
    });

    // Check if user is logged in
    function isLoggedIn() {
      return sessionStorage.getItem('currentUser') !== null;
    }

    // Check login and redirect
    function checkLoginAndRedirect(feature) {
      if (isLoggedIn()) {
        const user = JSON.parse(sessionStorage.getItem('currentUser'));
        if (user.type === 'admin') {
          window.location.href = 'admindashboard.html';
        } else {
          window.location.href = 'dashboard.html';
        }
      } else {
        showAuthModal();
      }
    }

    // Show authentication modal
    function showAuthModal() {
      document.getElementById('authModal').style.display = 'block';
    }

    // Close authentication modal
    function closeAuthModal() {
      document.getElementById('authModal').style.display = 'none';
    }

    // Voice Assistant Functions
    function toggleVoiceAssistant() {
      document.getElementById('voiceModal').style.display = 'block';
      startListening();
    }

    function closeVoiceModal() {
      document.getElementById('voiceModal').style.display = 'none';
      stopListening();
    }

    let recognition;
    let isListening = false;

    function startListening() {
      if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = document.getElementById('languageSelect').value === 'hi' ? 'hi-IN' : 
                         document.getElementById('languageSelect').value === 'pa' ? 'pa-IN' : 'en-US';
        recognition.continuous = false;
        recognition.interimResults = false;

        recognition.onstart = function() {
          isListening = true;
          document.getElementById('voiceStatus').innerHTML = 
            '<i class="fa-solid fa-microphone-lines"></i><p>Listening...</p>';
        };

        recognition.onresult = function(event) {
          const transcript = event.results[0][0].transcript;
          handleVoiceCommand(transcript);
        };

        recognition.onerror = function(event) {
          document.getElementById('voiceResponse').innerHTML = 
            '<p>Sorry, I couldn\'t understand. Please try again.</p>';
        };

        recognition.onend = function() {
          isListening = false;
          document.getElementById('voiceStatus').innerHTML = 
            '<i class="fa-solid fa-microphone"></i><p>Click and speak...</p>';
        };

        recognition.start();
      } else {
        document.getElementById('voiceResponse').innerHTML = 
          '<p>Voice recognition is not supported in your browser.</p>';
      }
    }

    function stopListening() {
      if (recognition && isListening) {
        recognition.stop();
      }
    }

    function handleVoiceCommand(command) {
      const lowerCommand = command.toLowerCase();
      let response = '';

      if (lowerCommand.includes('track') || lowerCommand.includes('bus')) {
        response = 'To track buses, please login first. I can redirect you to the login page.';
      } else if (lowerCommand.includes('login')) {
        response = 'Redirecting you to the login page...';
        setTimeout(() => window.location.href = 'login.html', 2000);
      } else if (lowerCommand.includes('about')) {
        response = 'Redirecting you to the about page...';
        setTimeout(() => window.location.href = 'about.html', 2000);
      } else if (lowerCommand.includes('contact')) {
        response = 'Redirecting you to the contact page...';
        setTimeout(() => window.location.href = 'contact.html', 2000);
      } else if (lowerCommand.includes('help') || lowerCommand.includes('faq')) {
        response = 'Redirecting you to the FAQ page for help...';
        setTimeout(() => window.location.href = 'faq.html', 2000);
      } else {
        response = 'I can help you with: tracking buses, login, about us, contact, or FAQ. What would you like to know?';
      }

      document.getElementById('voiceResponse').innerHTML = `<p><strong>You said:</strong> "${command}"</p><p><strong>Response:</strong> ${response}</p>`;
    }

    // Close modals when clicking outside
    window.onclick = function(event) {
      const authModal = document.getElementById('authModal');
      const voiceModal = document.getElementById('voiceModal');
      
      if (event.target == authModal) {
        closeAuthModal();
      }
      if (event.target == voiceModal) {
        closeVoiceModal();
      }
    }
  </script>
</body>
</html>